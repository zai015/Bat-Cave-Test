<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bat Cave Cafe | Bookings</title>
    <link rel="stylesheet" href="../css/style-bookings.css">
</head>

<body>

    <!-- HEADER -->
    <nav class="nav">
        <div class="nav-inner">
            <img src="../img/logo.png" alt="Bat Cave Cafe Logo" class="logo">
            <ul class="nav-links">
                <li><a href="home.html">Home</a></li>
                <li><a href="menu.html">Menu</a></li>
                <li><a class="active" href="bookings.html">Bookings</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">

        <!-- STEP 1: USER TYPE SELECTION -->
        <div id="step-user-type" class="wizard-step">
            <h1>Welcome to Bat Cave</h1>
            <p>Please select an option to proceed:</p>
            <div class="user-options">
                <button class="btn-large" onclick="showCalendar()">New User / New Booking</button>
                <button class="btn-large" onclick="showReturningUser()">Returning User</button>
            </div>
        </div>

        <!-- STEP 2: CALENDAR VIEW (New User) -->
        <div id="step-calendar" class="wizard-step" style="display:none;">
            <h1>Select a Date</h1>
            <div class="calendar-controls">
                <button id="prevMonth">&lt;</button>
                <h2 id="currentMonthYear">Month Year</h2>
                <button id="nextMonth">&gt;</button>
            </div>
            <div class="calendar-grid" id="calendarGrid">
                <!-- Calendar days generated by JS -->
            </div>
            <div class="legend">
                <span class="dot green"></span> Available
                <span class="dot yellow"></span> Partially Booked
                <span class="dot red"></span> Full / Event
            </div>
            <button class="btn-secondary" onclick="resetToHome()">Back</button>
        </div>

        <!-- STEP 3: BOOKING DETAILS FORM -->
        <div id="step-booking-details" class="wizard-step" style="display:none;">
            <h1>Booking Details</h1>
            <p>Selected Date: <span id="selectedDateDisplay"></span></p>

            <form id="bookingForm">
                <div class="form-group">
                    <label>Booking Mode</label>
                    <select id="bookingMode" required>
                        <option value="Study">Study Mode (₱50/hr/pax)</option>
                        <option value="Event">Event Mode (₱1000/hr - Whole Room)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" id="fullName" required>
                </div>

                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="email" required>
                </div>

                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" id="phone" required pattern="^[0-9]{10,11}$" placeholder="09XXXXXXXXX">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Start Time</label>
                        <div class="time-select-group" style="display: flex; gap: 5px;">
                            <select id="startHour" required style="flex: 1;">
                                <option value="" disabled selected>Hour</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                            <select id="startAmPm" required style="width: 70px;">
                                <option value="PM" selected>PM</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>End Time</label>
                        <div class="time-select-group" style="display: flex; gap: 5px;">
                            <select id="endHour" required style="flex: 1;">
                                <option value="" disabled selected>Hour</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">1</option>
                            </select>
                            <select id="endAmPm" required style="width: 70px;">
                                <option value="AM">AM</option>
                                <option value="PM" selected>PM</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Duration: <span id="durationDisplay">0</span> hours</label>
                </div>

                <div class="form-group" id="paxGroup">
                    <label>Number of Pax (Max 20)</label>
                    <input type="number" id="pax" min="1" max="20" value="1">
                </div>

                <div class="form-group">
                    <label>Equipment Add-Ons</label>
                    <div class="checkbox-item">
                        <input type="checkbox" id="projector">
                        <label for="projector">Projector (₱150/hr)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="speaker">
                        <label for="speaker">Speaker + Mic (₱150/hr)</label>
                    </div>
                </div>

                <div class="cost-summary">
                    <h3>Estimated Cost: ₱<span id="totalCost">0</span></h3>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="showCalendar()">Back</button>
                    <button type="submit" class="btn-primary">Book Now</button>
                </div>
            </form>
        </div>

        <!-- STEP 4: CONFIRMATION -->
        <div id="step-confirmation" class="wizard-step" style="display:none;">
            <h1>Booking Confirmed!</h1>
            <div class="confirmation-details" id="confirmationDetails">
                <!-- Details injected by JS -->
            </div>
            <p class="note">Please present this page (or screenshot) as proof of reservation.</p>
            <button class="btn-primary" onclick="resetToHome()">Back to Home</button>
        </div>

        <!-- STEP 5: RETURNING USER LOOKUP -->
        <div id="step-returning-lookup" class="wizard-step" style="display:none;">
            <h1>View Your Bookings</h1>
            <div class="form-group">
                <label>Enter Phone Number</label>
                <input type="tel" id="lookupPhone" placeholder="09XXXXXXXXX">
            </div>
            <div class="form-actions">
                <button class="btn-secondary" onclick="resetToHome()">Back</button>
                <button class="btn-primary" onclick="lookupBookings()">View Bookings</button>
            </div>
        </div>

        <!-- STEP 6: BOOKING LIST -->
        <div id="step-returning-list" class="wizard-step" style="display:none;">
            <h1>Your Active Bookings</h1>
            <div id="bookingsListContainer">
                <!-- List injected by JS -->
            </div>
            <div class="form-actions">
                <button class="btn-secondary" onclick="showReturningUser()">Back</button>
                <button class="btn-primary" onclick="showCalendar()">Book Another Room</button>
            </div>
        </div>

    </div>

    <script src="../js/bookings.js"></script>
</body>

</html>